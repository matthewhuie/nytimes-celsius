jQuery.Observe={},function(c){function h(n,t){t||(t=n,n=window.document);var o=[];return c(t).each(function(){for(var t=[],e=c(this),r=e.parent();r.length&&!e.is(n);r=r.parent()){var i=e.get(0).tagName.toLowerCase();t.push(i+":eq("+r.children(i).index(e)+")"),e=r}(r.length||e.is(n))&&o.push("> "+t.reverse().join(" > "))}),o.join(", ")}jQuery.Observe.path={get:h,capture:function(a,t){t||(t=a,a=window.document);var s=[];return c(t).each(function(){var e=-1,t=this;if(this instanceof Text)for(var r=(t=this.parentNode).childNodes,i=0;i<r.length;i++)if(r[i]===this){e=i;break}var n=h(a,t),o=c(a).is(t);s.push(function(t){t=o?t:c(t).find(n);return-1===e?t:t.contents()[e]})}),function(r){return r=r||window.document,s.reduce(function(t,e){return t.add(e(r))},c([]))}}}}(jQuery),function(e,r){function t(t){this.original=e(t),this.root=this.original.clone(!1,!0)}t.prototype.find=function(t){return r.path.capture(this.original,t)(this.root)},r.Branch=t}(jQuery,jQuery.Observe),function(s,i){function t(t,e){var r={};return t.forEach(function(t){t=e(t);t&&(r[t[0]]=t[1])}),r}function o(t){if("object"==typeof t)return t;t=t.split(/\s+/);var e={};return t.forEach(function(t){if(t=t.toLowerCase(),!r[t]&&!a[t])throw new Error("Unknown option "+t);e[r[t]||a[t]]=!0}),e}function n(t,e,r,i){this._originalOptions=s.extend({},e),e=s.extend({},e),this.attributeFilter=e.attributeFilter,delete e.attributeFilter,r&&(e.subtree=!0),e.childList&&(e.added=!0,e.removed=!0),(e.added||e.removed)&&(e.childList=!0),this.target=s(t),this.options=e,this.selector=r,this.handler=i}var r=t(["childList","attributes","characterData","subtree","attributeOldValue","characterDataOldValue","attributeFilter"],function(t){return[t.toLowerCase(),t]}),e=t(Object.keys(r),function(t){if("attributefilter"!==t)return[r[t],!0]}),a=t(["added","removed"],function(t){return[t.toLowerCase(),t]}),c=s([]),h=function(i){return"["+Object.keys(i).sort().reduce(function(t,e){var r=i[e]&&"object"==typeof i[e]?h(i[e]):i[e];return t+"["+JSON.stringify(e)+":"+r+"]"},"")+"]"},d=window.MutationObserver||window.WebKitMutationObserver;function u(t){this.patterns=[],this._target=t,this._observer=null}function l(t){this.patterns=[],this._paused=!1,this._target=t,this._events={},this._handler=this._handler.bind(this)}n.prototype.is=function(t,e,r){return h(this._originalOptions)===h(t)&&this.selector===e&&this.handler===r},n.prototype.match=function(t){var e=this.options,r=t.type;if(!this.options[r])return c;if(this.selector)switch(r){case"attributes":if(!this._matchAttributeFilter(t))break;case"characterData":return this._matchAttributesAndCharacterData(t);case"childList":if(t.addedNodes&&t.addedNodes.length&&e.added){var i=this._matchAddedNodes(t);if(i.length)return i}if(t.removedNodes&&t.removedNodes.length&&e.removed)return this._matchRemovedNodes(t)}else{var n=t.target instanceof Text?s(t.target).parent():s(t.target);if(!e.subtree&&n.get(0)!==this.target.get(0))return c;switch(r){case"attributes":if(!this._matchAttributeFilter(t))break;case"characterData":return this.target;case"childList":if(t.addedNodes&&t.addedNodes.length&&e.added||t.removedNodes&&t.removedNodes.length&&e.removed)return this.target}}return c},n.prototype._matchAttributesAndCharacterData=function(t){return this._matchSelector(this.target,[t.target])},n.prototype._matchAddedNodes=function(t){return this._matchSelector(this.target,t.addedNodes)},n.prototype._matchRemovedNodes=function(t){var e=new i.Branch(this.target),r=Array.prototype.slice.call(t.removedNodes).map(function(t){return t.cloneNode(!0)});return t.previousSibling?e.find(t.previousSibling).after(r):t.nextSibling?e.find(t.nextSibling).before(r):e.find(t.target).empty().append(r),this._matchSelector(e.root,r).length?s(t.target):c},n.prototype._matchSelector=function(t,r){t=t.find(this.selector);return r=Array.prototype.slice.call(r),t=t.filter(function(){var e=this;return r.some(function(t){return t instanceof Text?t.parentNode===e:t===e||s(t).has(e).length})})},n.prototype._matchAttributeFilter=function(t){return!this.attributeFilter||!this.attributeFilter.length||0<=this.attributeFilter.indexOf(t.attributeName)},u.prototype.observe=function(t,e,r){var i=this;this._observer?this._observer.disconnect():this._observer=new d(function(t){t.forEach(function(r){i.patterns.forEach(function(t){var e=t.match(r);e.length&&e.each(function(){t.handler.call(this,r)})})})}),this.patterns.push(new n(this._target,t,e,r)),this._observer.observe(this._target,this._collapseOptions())},u.prototype.disconnect=function(e,r,i){var n=this;this._observer&&(this.patterns.filter(function(t){return t.is(e,r,i)}).forEach(function(t){t=n.patterns.indexOf(t);n.patterns.splice(t,1)}),this.patterns.length||this._observer.disconnect())},u.prototype.disconnectAll=function(){this._observer&&(this.patterns=[],this._observer.disconnect())},u.prototype.pause=function(){this._observer&&this._observer.disconnect()},u.prototype.resume=function(){this._observer&&this._observer.observe(this._target,this._collapseOptions())},u.prototype._collapseOptions=function(){var n={};return this.patterns.forEach(function(t){var e,r,i=n.attributes&&n.attributeFilter;!i&&n.attributes||!t.attributeFilter?i&&t.options.attributes&&!t.attributeFilter&&delete n.attributeFilter:(i=(n.attributeFilter||[]).concat(t.attributeFilter),e={},r=[],i.forEach(function(t){e[t]||(r.push(t),e[t]=1)}),n.attributeFilter=r),s.extend(n,t.options)}),Object.keys(a).forEach(function(t){delete n[a[t]]}),n},l.prototype.NS=".jQueryObserve",l.prototype.observe=function(t,e,r){r=new n(this._target,t,e,r),s(this._target);r.options.childList&&(this._addEvent("DOMNodeInserted"),this._addEvent("DOMNodeRemoved")),r.options.attributes&&this._addEvent("DOMAttrModified"),r.options.characterData&&this._addEvent("DOMCharacerDataModified"),this.patterns.push(r)},l.prototype.disconnect=function(e,r,i){var n=s(this._target),o=this;this.patterns.filter(function(t){return t.is(e,r,i)}).forEach(function(t){t=o.patterns.indexOf(t);o.patterns.splice(t,1)});var a=this.patterns.reduce(function(t,e){return e.options.childList&&(t.DOMNodeInserted=!0,t.DOMNodeRemoved=!0),e.options.attributes&&(t.DOMAttrModified=!0),e.options.characterData&&(t.DOMCharacerDataModified=!0),t},{});Object.keys(this._events).forEach(function(t){a[t]||(delete o._events[t],n.off(t+o.NS,o._handler))})},l.prototype.disconnectAll=function(){var t,e=s(this._target);for(t in this._events)e.off(t+this.NS,this._handler);this._events={},this.patterns=[]},l.prototype.pause=function(){this._paused=!0},l.prototype.resume=function(){this._paused=!1},l.prototype._handler=function(t){if(!this._paused){var e={type:null,target:null,addedNodes:null,removedNodes:null,previousSibling:null,nextSibling:null,attributeName:null,attributeNamespace:null,oldValue:null};switch(t.type){case"DOMAttrModified":e.type="attributes",e.target=t.target,e.attributeName=t.attrName,e.oldValue=t.prevValue;break;case"DOMCharacerDataModified":e.type="characterData",e.target=s(t.target).parent().get(0),e.attributeName=t.attrName,e.oldValue=t.prevValue;break;case"DOMNodeInserted":e.type="childList",e.target=t.relatedNode,e.addedNodes=[t.target],e.removedNodes=[];break;case"DOMNodeRemoved":e.type="childList",e.target=t.relatedNode,e.addedNodes=[],e.removedNodes=[t.target]}for(var r=0;r<this.patterns.length;r++){var i=this.patterns[r],n=i.match(e);n.length&&n.each(function(){i.handler.call(this,e)})}}},l.prototype._addEvent=function(t){this._events[t]||(s(this._target).on(t+this.NS,this._handler),this._events[t]=!0)},i.Pattern=n,i.MutationObserver=u,i.DOMEventObserver=l,s.fn.observe=function(r,i,n){return i?n||(n=i,i=null):(n=r,r=e),this.each(function(){var t=s(this),e=t.data("observer");e||(e=new(d?u:l)(this),t.data("observer",e)),r=o(r),e.observe(r,i,n)})},s.fn.disconnect=function(r,i,n){return r&&(i?n||(n=i,i=null):(n=r,r=e)),this.each(function(){var t=s(this),e=t.data("observer");if(e){if(!r)return e.disconnectAll(),void t.removeData("observer");r=o(r),e.disconnect(r,i,n)}})}}(jQuery,jQuery.Observe);
